<script type="text/javascript">
  // ブラウザで動作
  RED.nodes.registerType("send-to-definy", {
    category: "function",
    color: "#a6bbcf",
    defaults: {
      name: { value: "" },
      custom: { value: "custom default value!" },
    },
    inputs: 1,
    outputs: 1,
    label: function () {
      console.log(this);
      this.outputs = this.name !== undefined ? this.name.length : 1;
      return this.name ?? "definy";
    },
  });

  window.definyNodeOnInput = (e) => {
    const inputElement = document.getElementById("definy-input-name");
    console.log("definyNodeOnInputが呼ばれた", inputElement.value);
    console.log(RED);
  };
</script>

<script type="text/html" data-template-name="send-to-definy">
  <div class="form-row">
    <label for="node-input-name"><i class="icon-tag"></i>Name</label>
    <input type="text" id="node-input-name" />
  </div>
  <div class="form-row">
    <label for="node-input-custom"><i class="icon-tag"></i>Custom</label>
    <input type="text" id="node-input-custom" />
  </div>
  <div class="form-row">
    <label for="definy-input-handle-test">
      <i class="icon-tag"></i>
      入力をハンドリングするよ
    </label>
    <input
      type="text"
      id="definy-input-handle-test"
      oninput="definyNodeOnInput()"
    />
  </div>
</script>

<script type="text/html" data-help-name="send-to-definy">
  <p>definy for Node RED</p>
</script>
